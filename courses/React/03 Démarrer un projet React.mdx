import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides title="Démarrer un projet React" course="Formation React">

<ChapterHeading
  title="Démarrer un projet React"
  imgSrc={require("../assets/backgrounds/atom-wallpaper.jpg").default.src}
/>

---

<SlideHeader slideTitle="Gestionnaire de dépendances : Yarn" />

<Image
  src={require("./assets/yarn.png").default.src}
  position="absolute"
  top="10%"
  right="10%"
  height="20%"
/>

##### **Yarn** : Alternative à npm performant et fiable

- https://yarnpkg.com
- Développé par Facebook, avec pour avantages :

  - <ListIcon as={MdCheckCircle} color="green.300" />
    Mise en cache des dépendances
  - <ListIcon as={MdCheckCircle} color="green.300" />
    Parallélisation des résolutions
  - <ListIcon as={MdCheckCircle} color="green.300" />
    Gestion automatique du .lock et conflits GIT

---

<SlideHeader slideTitle="Gestionnaire de dépendances : Yarn" />

#### Initialisation du projet :

```
yarn init
```

#### Ajouter une dépendance :

```
yarn add react
# avec une version
yarn add react@^16.0.0
```

#### Mise à jour d'une dépendance :

```
yarn upgrade react
```

---

<SlideHeader slideTitle="Démarrer un projet React" />

#### Un projet React c'est :

<List fontSize="1em" textAlign="left" m="0.6em 0" padding="12px 0">
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Du code (React / JS / Librairies)
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Un outil de transpilation (Babel)
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Un outil de build (Webpack)
  </ListItem>
</List>

---

<SlideHeader slideTitle="Transpilation" />

##### **La transpilation :** qu'est-ce que c'est ? 🤔

- C'est **une transformation** de code d'un language vers un autre
- Dans le monde JavaScript, elle permet de transformer du code moderne (ES6) en
  code compris par **les navigateurs courants.**
- **Babel** est très utilisé dans la communauté React.

---

<SlideHeader slideTitle="Transpilation avec Babel" />

<Image src={require("./assets/babel.png").default.src} width="70%" m="0 auto" />

- JavaScript compileur https://babeljs.io/
- Permet d'utiliser ES6 : 😎

  - https://babeljs.io/learn-es2015/
  - Tester la transpilation https://babeljs.io/repl/

---

<SlideHeader slideTitle="Transpilation avec Babel" />

##### **Babel :** comment ça marche ?

- **Babel** fonctionne en **3 étapes** :
  - 📦 <b>Parsing</b> du code initial
  - ⏳ <b>Transformation</b> du code parsé
  - ✨️ <b>Génération</b> du nouveau code (browser-compatible)

---

<SlideHeader slideTitle="Bundling" />

##### **Le bundling :** qu'est-ce que c'est ? 🤔

- La multiplication du nombre de fichiers JavaScript dans une page web peut
  devenir un frein aux performances
- Un bundler est un outil qui regroupe du code et toutes ses dépendences en un
  seul fichier
- Le temps de chargement est réduit en même temps que le nombre de requêtes pour
  des fichiers JavaScript.

---

<SlideHeader slideTitle="Builder son code avec Webpack" />

#### Exemples de bundlers populaires :

- Webpack https://webpack.js.org/
- Rollup https://rollupjs.org/
- Browserify https://browserify.org/

---

<SlideHeader slideTitle="Create React App" />

#### 🚨 Bonne nouvelle !

- Nous n'avons (presque) plus besoin de configurer Webpack et Babel
- [Create React App (CRA)](https://create-react-app.dev/) s'occupe de tout pour
  nous ! 🥰

---

<SlideHeader slideTitle="Create React App" />

#### Create React App

- Create React App facilite l'outillage d'un projet, il embarque :

  - ✨ ESLint
  - <ListIcon as={MdCheckCircle} color="green.300" />
    JEST (tests)
  - 🛠 Webpack / Babel
  - 📦 Images, fonts, fichiers…
  - 💪 TypeScript (optionnel)
  - 🎨 Sass, CSS, CSS Reset, Post-Processing, Modules

---

<SlideHeader slideTitle="Create React App" />

#### Create React App

Créer un nouveau projet :

```
npx create-react-app my-app

cd my-app
yarn start
```

---

<SlideHeader slideTitle="Mise en pratique : ES6" />

##### 📐🤓 **Mise en pratique** : ES6

- http://www.omdbapi.com/?apikey=b502738f&s=matrix
- Créer une fonction **loadMovies** permettant de rechercher des films selon un
  mot clé donné :

  - Utilisez le package [axios](https://github.com/axios/axios) pour appeler
    l'API
  - Utilisez async/await
  - Remontez uniquement les films datant de plus de 2002 avec la méthode filter
  - Retournez un tableau contenant le titre et l'année du film

---

<SlideHeader slideTitle="Mise en pratique : ES6" />

##### 📐🤓 <b>Mise en pratique :</b> ES6

```jsx
import React from "react";
import ReactDOM from "react-dom";
import { loadMovies } from "./client/movies";

const App = () => {
  loadMovies();
  return null;
};

ReactDOM.render(<App />, document.getElementById("root"));
```

```jsx
0: "The Matrix Reloaded - 2003",
1: "The Matrix Revolutions - 2003",
3: "The Matrix: Path of Neo - 2005"
```

</Slides>
