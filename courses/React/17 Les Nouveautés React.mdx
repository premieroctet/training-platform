import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides title="Les nouveautés React" course="Formation React">

<ChapterHeading title="Les nouveautés React" />

---

<SlideHeader slideTitle="Les hooks" />

#### 🎣 Les hooks

- https://reactjs.org/docs/hooks-intro.html
- Permet à un composant fonctionnel d'avoir un état

```jsx
import { useState } from "react";

function Example() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>Click me</button>
    </div>
  );
}
```

---

<SlideHeader slideTitle="Nouveauté: hooks" />

#### Nombreux hooks

- useState
- useEffect
- useContext
- useReducer
- useCallback
- useMemo
- useRef
- Et vos propre hooks ...! 👀

---

<SlideHeader slideTitle="Nouveauté: hooks" />

#### Ils permettent de

- partager la logique statefull entre vos composants
- réduire le boilerplante des lifecycles de classe
- utiliser une approche réactive qui s'éloigne du DOM

---

<SlideHeader slideTitle="Créer son propre hook" />

```jsx
import React, { useState } from "react";

function App() {
  const windowWidth = useWindowWidth();

  return <div>Largeur : {windowWidth}</div>;
}

function useWindowWidth() {
  const [windowWidth, setWindowWidth] = useState(window.innerWidth);

  useEffect(() => {
    const handler = () => {
      setWindowWidth(window.innerWidth);
    };

    window.addEventListener("resize", handler);
  });

  return windowWidth;
}
```

---

<SlideHeader slideTitle="Nouveauté : portal" />

#### Les Portals 🕳

- https://reactjs.org/docs/portals.html
- Permet d'attacher des composants autre part que dans l'arbre React

```jsx
<html>
  <body>
    <div id="app-root"></div>
    <div id="modal-root"></div>
  </body>
</html>;

class App extends Component {
  render() {
    const modal = <Modal />;
    return ReactDOM.createPortal(modal, document.getElementById("modal-root"));
  }
}
```

---

<SlideHeader slideTitle="Nouveauté : lazy" />

#### Lazy: code splitting ✂️

- https://reactjs.org/docs/code-splitting.html#reactlazy
- Permet de différer la récupération du composant

```jsx
const OtherComponent = React.lazy(() => import("./OtherComponent"));

function MyComponent() {
  return (
    <div>
      <OtherComponent />
    </div>
  );
}
```

---

<SlideHeader slideTitle="Nouveauté : Suspense" />

#### Suspense: placeholder et contrôle de composants asynchrone 🕰

- https://reactjs.org/docs/code-splitting.html#suspense

```jsx
import React, { lazy, Suspense } from 'react';

const OtherComponent = lazy(() => import('./OtherComponent'));

function MyComponent() {
  return (
    <div>
      <Suspense fallback={<div>Loading...</div>}>
        <OtherComponent />
      </Suspense>
    </div>
  );
```

</Slides>
