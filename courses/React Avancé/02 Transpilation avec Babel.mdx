import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides title="introduction" course="Formation React">

<SlideHeader slideTitle="Transpilation" />

##### <b>La transpilation :</b> qu'est ce que c'est ? ğŸ¤”

- C'est **une transformation** de code d'un language vers un autre (ou une autre
  version).
- Dans le monde JavaScript, elle permet de transformer du code moderne (ES6) en
  code compris pars **les navigateurs courants.**
- **Babel** est trÃ¨s utilisÃ© dans la communautÃ© React.

---

<SlideHeader slideTitle="Transpilation avec Babel" />

<Image src={require("./assets/babel.png").default.src} width="70%" m="0 auto" />

- Javascript compiler https://babeljs.io/
- Permet d'utiliser ES6 ğŸ˜
- https://babeljs.io/learn-es2015/
- Tester la transpilation : https://babeljs.io/repl

---

<SlideHeader slideTitle="Transpilation avec Babel" />

##### <b>Babel :</b> comment Ã§a marche ?

- **Babel** fonctionne en **3 Ã©tapes** :
  - ğŸ“¦ <b>Parsing</b> du code initial
  - â³ <b>Transformation</b> du code parsÃ©
  - âœ¨ï¸ <b>GÃ©nÃ©ration</b> du nouveau code (browser-compatible)

---

<SlideHeader slideTitle="Transpilation avec Babel" />

##### â³ <b>Babel :</b> transformation du code parsÃ©

- L'Ã©tape 2 est configurable via un fichier `.babelrc`
- On peut dÃ©finir les transformations Ã  appliquer via des plugins
  - https://babeljs.io/docs/plugins/#transform-plugins
- Exemple de plugin:
  [es2015-arrow-functions](https://babeljs.io/docs/plugins/transform-es2015-arrow-functions/)

---

<SlideHeader slideTitle="Transpilation avec Babel" />

#### Presets Babel : simplifier les plugins âœŒï¸

- Les **[Presets](https://babeljs.io/docs/plugins/#presets)** regroupent un
  ensemble de plugins Babel (es2015, es2016, React â€¦)
- Permet de simplifier le fichier de configuration
- Mais apporte moins de granularitÃ©

---

<SlideHeader slideTitle="Transpilation avec Babel" />

#### Le fichier de configuration .babelrc

- Mettre Ã  la racine de votre projet
- Permet de dÃ©finir plugins/presets

```json
{
  "presets": ["@babel/preset-env", "@babel/preset-react"],
  "plugins": ["@babel/plugin-transform-arrow-functions"]
}
```

---

<SlideHeader slideTitle="Transpilation avec Babel" />

#### Transpiler le code

- On ajoute babel localement en dÃ©pendances (dev)
- On peut alors transpiler notre code (src/ vers build/)

```
yarn add @babel/cli @babel/core --dev

./node_modules/.bin/babel src -d build
```

---

<SlideHeader slideTitle="Transpilation avec Babel" />

#### Transpiler le code

- On peut utiliser le champ "**scripts**" du fichier **package.json** ğŸ˜
- Yarn va alors automatiquement utiliser le binaire local (situÃ© dans
  **./node_modules/.bin/**) `yarn build`

```json
{
  "scripts": {
    "build": "babel src -d build"
  },
  "devDependencies": {
    "@babel/cli": "^7.0.0",
    "@babel/core": "^7.0.0",
    "@babel/preset-env": "^7.1.6",
    "@babel/plugin-transform-arrow-functions": "^7.0.0",
    "@babel/preset-react": "^7.0.0"
  }
}
```

---

<SlideHeader slideTitle="Transpilation : mise en pratique" />

##### ğŸ“ <b>Mise en pratique</b> - Installer Babel

- Ajouter **Babel** Ã  votre projet avec Yarn
- Ajouter **le preset ES6** (es2015)
- Transpiler votre **code ES6**
- Constater **la transformation** effectuÃ©e par Babel ğŸ––

---

<SlideHeader slideTitle="RÃ©sumÃ©" />

#### Ce que l'on vient de voir :

<List fontSize="1em" textAlign="left" m="0.6em 0" padding="12px 0">
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Ajouter des dÃ©pendances avec Yarn
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    GÃ©rer des scripts via le package.json
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Transpiler du code avec Babel
  </ListItem>
  <ListItem>
    <ListIcon as={MdCancel} color="red.400" />
    Builder son code avec Webpack
  </ListItem>
</List>

</Slides>
