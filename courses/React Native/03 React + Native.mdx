<Slides>

<ChapterHeading
  title="React"
  imgSrc={require("../assets/backgrounds/atom-wallpaper.jpg").default.src}
/>

---

<SlideHeader slideTitle="React" />
<Image
  src={require("../assets/logos/react-logo-full.png").default.src}
  alignSelf="start"
  height="15%"
/>

https://facebook.github.io/react âœŒï¸

- DÃ©veloppÃ© par Facebook depuis 2013
- **Librairie** pour gÃ©rer **l'interface et le binding de donnÃ©es**
- ReprÃ©sente la vue comme un ensemble de **composants hiÃ©rarchiques**
- Bien maÃ®triser **React et ses paradigmes** c'est bien maÃ®triser **React
  Native**

---

<SlideHeader slideTitle="IntÃ©rÃªts de React" />

- Apporte une **modularitÃ©** en composants
- DÃ©samorce **la complexitÃ©** des architectures (Redux) ğŸ’“
- Gains de **performance** (Virtual DOM) âš¡ï¸
- Apporte un **niveau de raffinement** (ergonomie, UX, feedback)
- **Isomorphique** (rendu client & serveur)
- DÃ©bloque le niveau **React-Native** ğŸ˜

---

<SlideHeader slideTitle="Utilisations" />

- UtilisÃ© par de **nombreuses entreprises:**
  - Facebook, Instagram, Twitter
  - Netflix, Airbnb, Teslaâ€¦
- UtilisÃ© en production: **performances & scalabilitÃ©**
- Une grosse communautÃ© **contribue** Ã  React (entreprises & particuliers)

---

<SlideHeader slideTitle="React: bonnes pratiques" />

- [Webpack](https://webpack.github.io/docs/) comme outil de build
- Utiliser [la syntaxe ES6](https://babeljs.io/learn-es2015/)ğŸ’“
- Utiliser une architecture de donnÃ©es ([Redux](http://redux.js.org/),
  [React Query](https://react-query.tanstack.com/))
- Pratiquer ! (courbe d'apprentissage assez rapide) ğŸ¤“

---

<SlideHeader slideTitle="Anatomie d'un composant React" />

- L'Ã©lÃ©ment central de React est le **composant**, constituÃ© de:
  - Des **propriÃ©tÃ©s** (props)
  - Un **Ã©tat** (state)
  - Des **Ã©vÃ©nements** (lifecycle events)
  - Une **vue** (render view)
- Un composant est contrÃ´lÃ© par des **props** et un **state**
- Un application React consiste en une imbrication de composants
- Un composant est une **fonction** prenant des paramÃ¨tres (props) et retournant
  du markup

---

<SlideHeader slideTitle="Les propriÃ©tÃ©s (props)" />

#### **Les props**

- https://facebook.github.io/react-native/docs/props.html
- Elles permettent de personnaliser un composant
- RenseignÃ©es par le parent
- Elles sont en **lecture seules** âš ï¸
- Accessibles dans un composant avec **this.props**

```jsx
<Avatar pictureUrl="http://i.imgur.com/lqKlotB.png" />;

this.props.pictureUrl; // Inside the component
```

---

<SlideHeader slideTitle="L'Ã©tat (state)" />

#### **Le state**

- https://facebook.github.io/react-native/docs/state.html
- Ce sont des variables **internes** au composants
- Le state est **initialisÃ© dans le constructeur** du composant âœ…
- Un composant peut **ne pas avoir de state** (stateless)
- Un composant stateless est un **"Pure component"**

---

<SlideHeader slideTitle="Exemple de composant" />

```jsx
import React from "react";
import PropTypes from "prop-types";

const Carousel = (props) => {
  const [currentSlide, setCurrentSlide] = React.useState(1);

  return (
    <>
      {props.imagesUrls.map((url, index) => {
        return <img src={url} className={currentSlide === index && "active"} />;
      })}
      <button onClick={() => setCurrentSlide(currentSlide + 1)}>Next</button>
    </>
  );
};

// On peut renseigner le types des propriÃ©tÃ©s et les valeurs par dÃ©faut
Carousel.propTypes = { imagesUrls: PropTypes.array };
Carousel.defaultProps = { imagesUrls: [] };
```

---

<SlideHeader slideTitle="Communication entre composants" />

- Composant **parent vers enfant**
  - On utilise les props
- Composant **enfant vers parent**
  - On utilise des callbacks passÃ©s en props
- DonnÃ©es **internes** Ã  un composant
  - On utilise le **state**
- Composant **parent vers petit petit petit fils** ğŸ‘¶
  - On utilise les ~~props~~ ContextAPI ou Redux !

---

<SlideHeader slideTitle="Le markup de React: JSX" />

- Un composant ne retourne pas directement du HTML mais du JSX
- C'est un markup dÃ©rivÃ© du HTML
- Proche du HTML mais permet d'Ã©crire des syntaxes plus complexes (conditions,
  boucles â€¦)

---

<SlideHeader slideTitle="JSX: choses Ã  savoir" />

- L'attribut "class" n'existe pas, il faut utiliser **className**
  ([liste des diffÃ©rences](https://facebook.github.io/react/docs/dom-elements.html)
- L'attibut style attend un **objet JavaScript**
- Pour afficher conditionnellement une balise on peut utiliser l'opÃ©rateur
  **&&**
- Un composant peut retourner un autre composant

---

<SlideHeader slideTitle="Algorithme de rendu React" />

- **Virtual DOM** - ReprÃ©sentation virtuelle du DOM navigateur (ou autre)
- Lorsque le state ou les props **d'un composant changent**, un rendu est
  dÃ©clenchÃ©
- DiffÃ©rentiel entre deux arbres de rendus
- BasÃ© sur trois rÃ¨gles :
  - 2 composants de la mÃªme classe vont gÃ©nÃ©rer des arbres similaires
  - 2 composants diffÃ©rents vont gÃ©nÃ©rer des arbres diffÃ©rents
  - Les composants enfants possÃ¨dent des clÃ©s uniques

---

<SlideHeader slideTitle="Cycle de vie" />
<Image src={require("./assets/lifecycle.png").default.src} />

---

<SlideHeader slideTitle="Exercices !" />

#### **Mise en pratique React** ğŸ“ğŸ¤“

- Initialiser une app React avec
  [facebook/create-react-app](https://github.com/facebook/create-react-app)

---

<ChapterHeading
  title="React Native"
  imgSrc={require("../assets/backgrounds/react-native-splash.jpg").default.src}
/>

---

<SlideHeader slideTitle="React Native" />

- Open source depuis avril 2015
- Ã‰galement propulsÃ© par Facebook
- Un showcase d'application dÃ©jÃ  impressionnant
  (https://facebook.github.io/react-native/showcase.html) :
  - **Facebook, Discord, Facebook Ads Manager, Facebook Groups, Soundcloud...**

<Image
  src={require("../assets/logos/react-logo.png").default.src}
  position="absolute"
  top="10%"
  right="10%"
  height="25%"
/>

---

<SlideHeader slideTitle="Architecture" />

- DÃ©veloppement mobile en Javascript, interprÃ©tÃ© par un moteur JS (JSCore, V8,
  Hermes...)
- Expose les **APIs natives** du systÃ¨me
- Application compilÃ©e : **performances identiques** aux applications
  traditionnelles
- Support d'iOS, d'Android et dans une moindre mesure de Windows, MacOS et
  Ubuntu

---

<SlideHeader slideTitle="Architecture : runtime" />

#### React Native = Native modules + Bridge + JS VM + JS modules

<Image src={require("./assets/react-native-architecture.png").default.src} />

---

<SlideHeader slideTitle="Configuration de lâ€™environnement de travail (React Native CLI)" />

- DÃ©veloppement en **JavaScript** âœŒï¸
- PossibilitÃ© de descendre plus bas dans la chaÃ®ne de compilation avec **Xcode
  et Android Studio**
- De la **documentation** https://reactnative.dev/
- Et pour dÃ©marrer correctement â€¦
  - https://reactnative.dev/docs/environment-setup

---

<SlideHeader slideTitle="Configuration de lâ€™environnement de travail (React Native CLI)" />

- Installation **d'Android Studio** et de **Xcode** (seulement sur Mac)
- Installation dÃ©pendances JS
- Watchman est optionnel mais accÃ©lÃ¨re fortemment la compilation

###### Mac only

`$ brew install node`

`$ brew install watchman`

###### Everyone

`$ npm install --global yarn`

---

<SlideHeader slideTitle="Votre premiÃ¨re application (Native)" />

`$ npx react-native init "NomDuProjet"`

- CrÃ©ation des fichiers de template
- Installation de react-native

#### Pour lancer votre application :

`$ cd "NomDuProjet"`

`$ npx react-native run-ios`

`$ npx react-native run-android `

---

<SlideHeader slideTitle="Votre premiÃ¨re application (Expo)" />

`$ npm install -g expo-cli`

`$ expo init AwesomeProject`

`$ cd AwesomeProject`

`$ npm start`

- Ne nÃ©cessite pas de compilation native ğŸ‘Œ
- Rapide, accessible mais incomplet
- NÃ©cessite l'application [Expo Go](https://expo.io/) sur votre tÃ©lÃ©phone

---

<SlideHeader slideTitle="DÃ©mo en ligne (snack.expo.io)" />

<Image src={require("./assets/snack-expo.png").default.src} />

---

<SlideHeader slideTitle="Que se passe-t-il lors de la compilation ?" />

- Compilation de l'application native iOS ou Android, via les outils en cli de
  Xcode ou Gradle
- DÃ©marrage du packager react-native (_npm start_) qui se charge de compiler le
  code JS et l'envoyer Ã  l'application
- Le SDK react-native exÃ©cute le code JS et l'application dÃ©marre

---

<SlideHeader slideTitle="Layout d'un projet React Native" />

<Flex>

<Box>

```
â”œâ”€â”€ node_modules
â”œâ”€â”€ app.json
â”œâ”€â”€ babel.config.js
â”œâ”€â”€ index.js
â”œâ”€â”€ App.js
â”œâ”€â”€ metro.config.js
â”œâ”€â”€ package.json
â””â”€â”€ yarn.lock
â”œâ”€â”€ __tests__
â”‚Â Â  â””â”€â”€ App-test.js
```

</Box>

<Box>

```
â”œâ”€â”€ android
â”‚Â Â  â”œâ”€â”€ app
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BUCK
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ build.gradle
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ build_defs.bzl
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ debug.keystore
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ proguard-rules.pro
â”‚Â Â  â”‚Â Â  â””â”€â”€ src
â”‚Â Â  â”œâ”€â”€ build.gradle
â”‚Â Â  â”œâ”€â”€ gradle
â”‚Â Â  â”‚Â Â  â””â”€â”€ wrapper
â”‚Â Â  â”œâ”€â”€ gradle.properties
â”‚Â Â  â”œâ”€â”€ gradlew
â”‚Â Â  â”œâ”€â”€ gradlew.bat
â”‚Â Â  â””â”€â”€ settings.gradle
```

</Box>

<Box>

```
â”œâ”€â”€ ios
â”‚Â Â  â”œâ”€â”€ AwesomeProjectNative
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AppDelegate.h
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AppDelegate.m
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Base.lproj
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Images.xcassets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Info.plist
â”‚Â Â  â”‚Â Â  â””â”€â”€ main.m
â”‚Â Â  â”œâ”€â”€ AwesomeProjectNative.xcodeproj
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ project.pbxproj
â”‚Â Â  â”‚Â Â  â””â”€â”€ xcshareddata
â”‚Â Â  â”œâ”€â”€ AwesomeProjectNative.xcworkspace
â”‚Â Â  â”‚Â Â  â””â”€â”€ contents.xcworkspacedata
â”‚Â Â  â”œâ”€â”€ AwesomeProjectNativeTests
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AwesomeProjectNativeTests.m
â”‚Â Â  â”‚Â Â  â””â”€â”€ Info.plist
â”‚Â Â  â”œâ”€â”€ Podfile
â”‚Â Â  â”œâ”€â”€ Podfile.lock
â”‚Â Â  â””â”€â”€ Pods
```

</Box>

</Flex>

---

<SlideHeader slideTitle="Point d'entrÃ©e" />

```jsx
import React, { Component } from "react";
import { AppRegistry, StyleSheet, Text, View } from "react-native";
import { name as appName } from "./app.json";

const App = () => {
  return (
    <View style={styles.container}>
      <Text style={styles.welcome}>Welcome to React Native!</Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
    backgroundColor: "#F5FCFF",
  },
  welcome: {
    fontSize: 20,
    textAlign: "center",
    margin: 10,
  },
});

AppRegistry.registerComponent(appName, () => App);
```

</Slides>
