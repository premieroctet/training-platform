<Slides>

<ChapterHeading
  title="D√©ploiement"
  imgSrc={require("../assets/backgrounds/spacex-launch.jpg").default.src}
/>

---

<SlideHeader slideTitle="Images : splashscreen et icones" />

- De multiple formats √† g√©rer par plateforme et device
- Gain de temps en utilisant des outils de g√©n√©rations
- Ionic cli (utilis√© pour Ionic) :
  https://github.com/driftyco/ionic-cli#icon-and-splash-screen-image-generation
- [react-native-make](https://github.com/bamlab/react-native-make)

---

<SlideHeader slideTitle="Splashscreen : chargement" />

- Les applications natives utilisant un moteur JS poss√®dent un l√©ger temps de
  d√©marrage
- √âcran blanc entre l'image de splashscreen et votre premi√®re vue: lancement du
  moteur et premi√®re interpr√©tation du code
- Probl√®me r√©solu via l'ajout d'un splashscreen "natif"
- https://docs.expo.dev/guides/splash-screens/

---

<SlideHeader slideTitle="Publication d'application (iOS)" />

#### Phases de d√©ploiement :

Libre d'acc√®s

Acc√®s payant (compte iOS Developer), abonnement annuel √† renouveler

<List listStyleType="disc">
  <ListItem color="blue.500">Test extensif en simulateur</ListItem>
  <ListItem color="blue.500">Compilation pour test</ListItem>
  <ListItem color="blue.500">Test sur le mobile (en mode d√©veloppeur)</ListItem>
  <ListItem color="red.500">Compilation en mode ¬´ distribution ¬ª</ListItem>
  <ListItem color="red.500">Soumission √† l'AppStore</ListItem>
  <ListItem>üï£ üôè (d√©lai + pri√®res)</ListItem>
  <ListItem>Diffusion sur l'AppStore si Apple est ok üëÆ‚Äç‚ôÇÔ∏è </ListItem>
</List>

---

<SlideHeader slideTitle="Publication d'application (iOS)" />

#### Avant compilation ¬´¬†pour mat√©riel¬†¬ª, il faut cr√©er un certificat, un profil de provision, etc.¬†: tout se passe sur l'iOS provisioning portal.

---

<SlideHeader slideTitle="Publication d'application (iOS)" />

<Image src={require("./assets/ios-dev-portal.png").default.src} />

---

<SlideHeader slideTitle="Certificats et compilation (iOS)" />

- **D√©claration des App IDs** : ¬´¬†com.premieroctet.formation¬†¬ª
- **D√©claration des Devices** : Jusqu'√† 100 par compte
- **G√©n√©ration d'un certificat** : Signature unique du d√©veloppeur, en dev ou en
  prod
- **Cr√©ation du provisionning** : autorisation d'ex√©cuter un certain App ID,
  sign√© par un certain certificat, sur un device donn√©

###### Provisionning et certificat d√©pendent de l'environnement de compilation (dev ou prod) et sont tr√®s li√©s.

---

<SlideHeader slideTitle="Certificats et compilation (iOS)" />

###### Lorsque certificat et provisionning sont install√©s sur la machine du d√©veloppeur.

- Certificat automatiquement extrait de la Keychain
- S√©lection de l'√©quipe, doit poss√©der le provisionning de l'application¬†!
- XCode propose d'en cr√©er automatiquement s'il n'en trouve pas

<Image
  src={require("./assets/xcode-provisionning.png").default.src}
  height="30%"
  boxShadow="base"
/>

---

<SlideHeader slideTitle="Certificats et compilation (iOS)" />

#### Build en release, s√©lection "Generic iOS device" et du scheme "Release".

<Image src={require("./assets/xcodeReleaseBuild.png").default.src} />

---

<SlideHeader slideTitle="Publication d'application (Android)" />

#### Phases de d√©ploiement :

Libre d'acc√®s

Acc√®s payant (compte Google Play developper), paiement unique (valable √† vie)

<List listStyleType="disc">
  <ListItem textColor="blue.500">Test extensif en simulateur</ListItem>
  <ListItem textColor="blue.500">Compilation pour test</ListItem>
  <ListItem textColor="blue.500">
    Test sur le mobile (en mode d√©veloppeur)
  </ListItem>
  <ListItem textColor="blue.500">Compilation en mode ¬´ production ¬ª</ListItem>
  <ListItem textColor="red.500">Soumission au Play Store</ListItem>
  <ListItem>Diffusion en quelques heures</ListItem>
  <ListItem>Mises √† jour instantan√©es (quelques minutes)</ListItem>
</List>

---

<SlideHeader slideTitle="Publication d'application (Android)" />

#### **Moins contraignant que iOS** :

##### Des applications qui crashent (syst√©matiquement) peuvent arriver par erreur sur le Store.

---

<SlideHeader slideTitle="Publication d'application (Android)" />
<Image src={require("./assets/playstore.png").default.src} />

---

<SlideHeader slideTitle="Publication d'application (Android)" />

- G√©n√©ration d'une cl√© priv√©e pour signer l'application

`keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000`

- Keystore √† ne pas perdre sinon impossible de mettre √† jour l'application

```bash
# ~/.gradle/gradle.properties_
MYAPP_RELEASE_STORE_FILE=my-release-key.keystore
MYAPP_RELEASE_KEY_ALIAS=my-key-alias
MYAPP_RELEASE_STORE_PASSWORD=**\***
MYAPP_RELEASE_KEY_PASSWORD=**\***
```

- Compilation prod et installation sur un device :

`cd android && ./gradlew assembleRelease && ./gradlew installRelease`

---

<SlideHeader slideTitle="Int√©gration continue avec Bitrise" />
<HStack>

- Support officiel de React Native
- Possibilit√© de build pour iOS et Android
- Gratuit pour 200 builds par mois

<Image src={require("./assets/bitrise.jpg").default.src} />
</HStack>

---

<SlideHeader slideTitle="Int√©gration continue avec Bitrise" />

```yaml
app:
  envs:
    - BITRISE_PROJECT_PATH: ios/example.xcodeproj
      opts:
        is_expand: false
---
workflows:
  primary:
    steps:
      - git-clone@3.3.3:
          inputs: [clone_depth: "1"]
      - script@1.1.2:
          title: npm install
          inputs:
            - content: |-
                #!/bin/bash
                npm install
      - script@1.1.2:
          title: npm test
          inputs:
            - content: |-
                #!/bin/bash
                npm test
      - install-react-native@0.1.0: {}
      - react-native-bundle@0.2.0:
          inputs:
            - entry_file: "./index.ios.js"
            - out: ""
```

---

<SlideHeader slideTitle="Publication automatis√©e avec Fastlane" />

- Automatisation des t√¢ches
- G√©n√©ration de capture d'√©crans (snapshot)
- Certificats et signature de code
- Diff√©rentes "lanes", par exemple d√©ploiement beta ou prod
- Fichiers de configurations versionn√©s

```ruby
lane :beta do
  increment_build_number
  cocoapods
  match
  testflight
  sh "./customScript.sh"
  slack
end
```

---

<ChapterHeading
  title="Performances"
  imgSrc={require("../assets/backgrounds/performance.jpg").default.src}
/>

---

<SlideHeader slideTitle="Performances : FPS" />

- 60 FPS: 16.67ms par frame
- Perte d'une frame = interface non responsive
- 2 frame rates disponibles en debug
  - JS Framerate : correspond au thread JS
  - Main framerate : correspond au thread principale

---

<SlideHeader slideTitle="Sources de mauvaises performances" />

- Transition de la navigation (react-navigation &lt; react-native-navigation)
- Traitement lors d'actions utilisateurs, touch events, swipes...
- Utilisation de Animated lorsque le thread JS est occup√©
- FlatList: un composant ax√© performance avec les m√©thodes
  **initialnumtorender**,** maxToRenderPerBatch ** et **getItemLayout**

---

<ChapterHeading
  title="Ressources et application de d√©monstration"
  imgSrc={require("../assets/backgrounds/liveshow.jpg").default.src}
/>

---

<SlideHeader slideTitle="Ressources React Native" />

- Documentation : https://reactnative.dev/blog/
- https://js.coach/react-native et https://twitter.com/_jscoach
- https://www.reddit.com/r/reactnative/
- http://www.reactnative.com/

---

<SlideHeader slideTitle="Ressources JS" />

- Documentation : https://developer.mozilla.org/fr/docs/Web/JavaScript
- https://www.reddit.com/r/javascript/
- https://justjavascript.com/
- https://www.codecademy.com/learn/introduction-to-javascript

---

<SlideHeader slideTitle="Cr√©dits" />

- https://flic.kr/p/pudG8L
- https://unsplash.com/search/rocket?photo=GDdRP7U5ct0
- https://unsplash.com/photos/Z0iN43rOwO8
- https://unsplash.com/collections/155449/scenery?photo=aDu5aedOoD8

</Slides>
