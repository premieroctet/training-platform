import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides>

<ChapterHeading title="Types guards" backgroundColor="#2d3436" />

---

<SlideHeader slideTitle="Types guards" />

#### Types guards

Comme nous l'avons vu, TypeScript expose uniquement les propriétés communes d'une union. Afin d'accéder à des propriétés spécifiques, il faut utiliser un <mark>type guard</mark>.

---

<SlideHeader slideTitle="Types guards" />

#### Types guards

Un <mark>type guard</mark> est simplement une condition JS qui permet de vérifier le type avant d'accéder à l'objet :

- if / else
- switch

---

<SlideHeader slideTitle="Types guards" />

#### Types guards

Dans ces conditions, on utilisera les opérateurs suivants :

- `typeof`
- `instanceof`
- `in`

---

<SlideHeader slideTitle="Types guards" />

#### Opérateur typeof

```typescript
const user = { username: "John" };
const isMember = true;

console.log(typeof user); // object
console.log(typeof isMember); // boolean
console.log(typeof user.username); // string
```

---

<SlideHeader slideTitle="Types guards" />

#### Opérateur instanceof

```typescript
class User {
  constructor(public username: string) {}
}
const user = new User("John");

console.log(user instanceof User); // true
```

---

<SlideHeader slideTitle="Types guards" />

#### Opérateur in

```typescript
const user = { username: "John" };

console.log("username" in user); // true
console.log("firstname" in user); // false
```

---

<SlideHeader slideTitle="Types guards" />

#### Union discriminante

```typescript
interface Member {
  type: "free";
  freeTrialExpires: Date;
}

interface Pro {
  type: "pro";
  subscriptionId: string;
}

const user: Pro | Member;

if (user.type === "pro") {
  const { subscriptionId } = user; // No error
}
```

---

<SlideHeader slideTitle="Types guards" />

#### Créer ses Types guards

```typescript
const isPro = (user: Pro | Member) => user.type === "pro";

if (isPro(user)) {
  const { subscriptionId } = user;
} else {
  const { freeTrialExpires } = user;
}
```

</Slides>
