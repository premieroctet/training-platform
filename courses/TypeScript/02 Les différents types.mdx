import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides>

<ChapterHeading title="Les diff√©rents types" backgroundColor="#ffeaa7" />

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### D√©clarer des types

Le typage se fait juste apr√®s la d√©claration d'une variable

```typescript
const username: string = "John Doe";
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types primaires

String, number, boolean

```ts
const username: string;
const old: number;
const isActive: boolean;
const skills: string[];
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types par r√©f√©rence

Array, tuple

```typescript
// Deux fa√ßon de typer un array
const roles: Array<string>;
const roles: string[]; // <-- M√©thode la plus utilis√©e

// Tuples
const settings: [string, string, number];
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types par r√©f√©rence

Object

```typescript
const user: {
  name: string;
  age: number;
};
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types par r√©f√©rence

Object : propri√©t√© optionnel

```typescript
const user: {
  name: string;
  age?: number; // optionnel
};
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types par r√©f√©rence

Object : propri√©t√© imbriqu√©e

```typescript
const user: {
  name: string;
  address: {
    street: string;
    city: string;
  };
};
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types par r√©f√©rence

Object : d√©finition cl√©/valeur

```typescript
const roles: {
  [key: string]: number;
};

// {"admin": 1, "user": 2, "guest": 3}
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Types par r√©f√©rence

- Map permet de d√©clarer un objet cl√©/valeur
- Permet de d√©clarer un tableau √† valeur unique

```typescript
const roles: Map<string, number>;
// {"admin": 1, "user": 2, "guest": 3}

const adminIds: Set<number>;
// [1, 3, 10]
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Le type any

- Le type `any` est un joker, il permet √† une variable d'avoir n'importe quel type. √Ä utiliser <mark>en dernier recours !</mark>
- Il peut-√™tre explicite ou implicite

```typescript
const username: any; //<-- Explicite
const username; // <-- Implicite
```

<Box mt={6}>
  <small>
    üí° En mode strict, les any implicites sont interdits (option
    --noImplicitAny)
  </small>
</Box>

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Le type unknown

- Le type `unknown` est plus stricte que `any`, il oblige <mark>√†¬†v√©rifier le type</mark> lors du runtime

```typescript
const firstname: any;
firstname = "John";
firstname.toLowerCase(); // <-- Pas d'erreur TS

const lastname: unknown;
lastname = "Doe";
lastname.toLowerCase(); // <-- Erreur TS

if (typeof lastname === "string") {
  lastname.toLowerCase(); // <-- Pas d'erreur TS
}
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Le type void

- Une variable typ√©e void ne peut √™tre que `null` ou `undefined` (pas tr√®s utile‚Ä¶)
- Le type `void` est souvent utilis√© pour d√©clarer une fonction qui ne retourne rien :

```typescript
const nada: void;
const nada = (): void => {};
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Le type never

Le type never exprime un type qui ne peut-√™tre utilis√© et qui ne devrait jamais √™tre retourn√© (boucle infinie, erreur‚Ä¶) :

```typescript
function throwError(message: string): never {
  throw new Error(message);
}

function worker(): never {
  while (true) {}
}

function getValue(x: string | number) {
  if (typeof x === "string") {
  } else if (typeof x === "number") {
  } else {
    x; // never
  }
}
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Le type function

```typescript
const sum: (a: number, b: number): number = (a, b) => a + b;
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### üí° Inf√©rence de type

Lors de la d√©claration et initialisation d'un variable, il n'est pas n√©cessaire de sp√©cifier le type, TypeScript l'inf√®re :

```typescript
// string
const username = "John Doe";

// { name: string, age: number }
const user: {
  name: "John Doe";
  age: 12;
};
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Les types litt√©raux

- Sous types des strings, boolean et number
- Permet de d√©clarer **des constantes ou enum**

```typescript
const noticeLevel: "notice" = "notice";

// Pratique avec une union
const noticeLevel: "notice" | "warning" | "error" = "notice";
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Les enums

```typescript
enum DeploymentStatus {
  Pending,
  Errored,
  Published,
}

enum DeploymentStatus {
  Pending = "Pending",
  Errored = "Errored",
  Published = "Published",
}
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Typer une fonction

```typescript
const sum = (a: number, b: number): number => a + b;
```

Ici non plus, pas besoin de typer le retour, TypeScript l'inf√®re

```typescript
const sum = (a: number, b: number) => a + b;
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### Typer une fonction

Fonction avec valeur par d√©faut (type inf√©r√©) et argument optionnel :

```typescript
const sum = (a = 10, b?: number): number => a + b;
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### üí° Type Assertions

Parfois TypeScript ne peut connaitre le type exact, il est n√©cessaire de le sp√©cifier gr√¢ce au mot cl√© `as` :

```tsx
// TypeScript ne peut deviner l'√©lement cibl√©
const myCanvas = document.getElementById("main_canvas") as HTMLCanvasElement;
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### üí° Non-null Assertion Operator

On peut aussi dire √† TypeScript qu'une variable n'est pas nulle (malgr√© sa d√©claration) :

```jsx
function liveDangerously(x?: number | null) {
  // No error
  console.log(x!.toString());
}
```

---

<SlideHeader slideTitle="Les diff√©rents types" />

#### üí° readonly

On peut aussi dire √† TypeScript qu'une variable est uniquement accessible en lecture :

```typescript
interface Point {
  readonly x: number;
  readonly y: number;
}

const ids: readonly number[] = [1, 2, 3];
```

</Slides>
