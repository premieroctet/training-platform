import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides>

<ChapterHeading title="Manipulation des types" backgroundColor="#fad390" />

---

<SlideHeader slideTitle="Manipulation des types" />

TypeScript permet de g√©n√©rer des types en se basant **sur d'autres types**. Pour cela il propose plusieurs op√©rateurs :

- **keyof**
- **typeof**

---

<SlideHeader slideTitle="Manipulation des types" />

#### Op√©rateur keyof

L'op√©rateur `keyof` permet de r√©cup√©rer les noms des propri√©t√©s d'un type :

```typescript
interface User {
  username: string;
  email: string;
}

type UserProperties = keyof User; // "username" | "email"
const user: UserProperties = "email";
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Exemple keyof + g√©n√©rique

On peut combiner des types g√©n√©riques avec des op√©rateurs¬†TS¬†ü§Ø

```typescript
function getProperty<Type, Key extends keyof Type>(obj: Type, key: Key) {
  return obj[key];
}

let x = { a: 1, b: 2, c: 3, d: 4 };

getProperty(x, "a");
getProperty(x, "m"); // Error
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Op√©rateur typeof

Comme son √©quivalant JS, l'op√©rateur `typeof` permet de r√©cup√©rer le type d'une variable :

```typescript
interface User {
  username: string;
  email: string;
}

const user: User = { email: "", username: "" };
type OtherUser = typeof user; // User
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Acc√®s par index

On peut acc√©der √† un sous type via les index :

```typescript
type Person = {
  age: number;
  name: string;
  address: { city: string; zipcode: number };
};

type Address = Person["address"]; // { city: string; zipcode: number }
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Type conditonnel

Permet g√©n√©ralement de r√©duire les types issus d'une union :

```typescript
type HasFourLegs<Animal> = Animal extends { legs: 4 } ? Animal : never;
type Animals = Bird | Dog | Ant | Wolf;
type FourLegs = HasFourLegs<Animals>; // Dog | Wolf
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Mapped type

`[P in keyof T]` permet de boucler sur les propri√©t√©s d'un type :

```typescript
type FeatureFlags = {
  darkMode: () => void;
  newUserProfile: () => void;
};

type OptionsFlags<T> = {
  [Property in keyof T]: boolean;
};

const featuresOption: OptionsFlags<FeatureFlags> = {
  darkMode: true,
  newUserProfile: false,
};
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Mapped type

```typescript
// Rendre tout facultatif
type Partial<T> = {
  [P in keyof T]?: T[P];
};

// Rendre tout en lecture seule
type Readonly<T> = {
  readonly [P in keyof T]: T[P];
};
```

---

<SlideHeader slideTitle="Manipulation des types" />

#### Op√©rateur infer (avanc√©)

`Infer` permet de r√©cup√©rer le type d√©duit par le compilateur TypeScript dans une condition

```typescript
type User = { username: string };
type Unpacked<T> = T extends (infer U)[] ? U : T;

type UnpackedUser = Unpacked<User[]>; // User
```

</Slides>
