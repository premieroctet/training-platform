import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides>

<ChapterHeading title="üìêü§ì Front avec Next.Js" backgroundColor="#6c5ce7" />

---

<SlideHeader slideTitle="üìêü§ì Front avec Next.Js" />

#### D√©couverte de Prisma

Nous allons d√©couvrir un nouveau **ORM TypeScript** : [Prisma](https://www.prisma.io/).

- Ajoutez Prisma √† votre projet Next.js pr√©c√©demment cr√©√© :

```
yarn add --dev prisma
npx prisma init
```

https://www.prisma.io/docs/getting-started/setup-prisma/add-to-existing-project/relational-databases-typescript-postgres

---

<SlideHeader slideTitle="üìêü§ì Front avec Next.Js" />

#### Synchronisation de la BDD

Modifier votre `.env` avec l'url de votre base de donn√©es

```
DATABASE_URL="postgresql://user:pwd@localhost:5432/bdd?schema=public"
```

Lancer la synchronisation :

```
npx prisma db pull
```

---

<SlideHeader slideTitle="üìêü§ì Front avec Next.Js" />

#### G√©n√©ration du client

Installez et g√©n√©rez le client Prisma :

```
yarn add @prisma/client
npx prisma generate
```

Ce client typ√© va nous permettre d'interroger notre base de donn√©es

---

<SlideHeader slideTitle="üìêü§ì Front avec Next.Js" />

#### G√©n√©ration du client

R√©cup√©rez vos donn√©es depuis le client :

```
export const getServerSideProps: GetServerSideProps = async ({ req }) => {
  const prismaClient = new PrismaClient()
  const posts = await prismaClient.post.findMany({
    select: { title: true, content: true },
  })

  prismaClient.$disconnect()

  return { props: { posts } }
}
```

---

<SlideHeader slideTitle="üìêü§ì Front avec Next.Js" />

Cr√©ez un composant g√©n√©rique pour afficher vos donn√©es :

```
import React from "react"

interface TableProps {
  items: { id: string }[]
  renderItem: (item: { id: string }) => React.ReactNode
}

export const Table = (props: TableProps) => {
  return null
}

export const App = () => {
  return (
    <Table
      items={[{ id: "1" }]}
      renderItem={(item) => {
        return null
      }}
    ></Table>
  )
}

```

---

<SlideHeader slideTitle="" />

#### Fin üçª

**Merci !** Des questions ?

baptiste@premieroctet.com

</Slides>
