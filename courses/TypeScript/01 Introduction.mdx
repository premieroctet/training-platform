import { Image } from "@chakra-ui/image";
import ChapterHeading from "@/components/mdx/ChapterHeading";
import { MdCheckCircle, MdCancel } from "react-icons/md";

<Slides>

## **TypeScript** üõ°

<HStack>
<VStack>

<h5 color="gray.500">
  Formation -{" "}
  {new Date().toLocaleDateString("fr", {
    year: "numeric",
    month: "long",
  })}
</h5>

</VStack>
</HStack>

---

<SlideHeader slideTitle="Introduction" />

#### Au programme üéì

<List fontSize="1em" textAlign="left" m="0.6em 0" padding="12px 0">
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Pourquoi TypeScript
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Installation
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Types
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    D√©corateurs
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Manipulation des types
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    G√©n√©rique
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Type utilitaires
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    D√©clarations
  </ListItem>
</List>

---

<SlideHeader slideTitle="Introduction" />

#### Qu'est-ce que c'est ? üßê

- Language **open source** d√©velopp√© par Microsoft
- Permet de **typer** du JavaScript et le rendre plus **fiable**
- TypeScript est un **superset** de JavaScript

---

<SlideHeader slideTitle="Introduction" />

#### √Ä quoi √ßa sert ? ü§î

- Faciliter la compr√©hension du code
- Acc√©lerer le d√©veloppement
- Eviter les r√©gressions
- Rendre le code plus robuste
- Documentation et tests automatiques

---

<SlideHeader slideTitle="Introduction" />

#### TypeScript en deux concepts :

- <mark>Transpilation</mark>
- Typage statique

---

<SlideHeader slideTitle="Transpilation" />

<Image
  src={require("./assets/transpilation.png").default.src}
  width="70%"
  m="0 auto"
/>

---

<SlideHeader slideTitle="Transpilation" />

##### **La transpilation :** qu'est-ce que c'est ? ü§î

- C'est **la transformation** du code d'un language vers un autre avec un m√™me niveau d'abstraction
- Dans le monde JavaScript, elle permet de transformer du code moderne (TS, ECMAScript‚Ä¶) en
  code compris par **la majorit√© des navigateurs**

---

<SlideHeader slideTitle="Transpilation" />

**üí° ECMAScript : **Sp√©cification suivi par JavaScript

- ES1 - 1997
- ...
- ES5 - 2014 - **Suport√©e par la majorit√© des navigateurs**
- ES6 - 2015 üéâ (Classes, promises, modules‚Ä¶)
- ES9 - 2018 (Spread operator)
- ES12 - 2021

---

<SlideHeader slideTitle="Transpilation" />

<Image
  src={require("./assets/transpilation-ecma.jpg").default.src}
  width="70%"
  m="0 auto"
/>

---

<SlideHeader slideTitle="Transpilation" />

##### üí° **Transpiler vs Bundler **

- Un **bundler** (Webpack, Rollup‚Ä¶) aggr√®ge en g√©n√©ral des fichiers JS d√©j√† transpil√©s
- Un **transpiler** convertie d'un language vers un autre

---

<SlideHeader slideTitle="Transpilation" />

#### Exemples de transpilers ‚öôÔ∏è

- <mark>TypeScript compiler</mark> (TSC)
- Babel https://babeljs.io/

---

<SlideHeader slideTitle="Transpilation" />

#### TSC - TypeScript compiler

- On ajoute TypeScript localement en d√©pendances (dev)
- On a alors acc√®s au binaire pour transpiler du TS (TSC)

```
yarn add --dev typescript
./node_modules/.bin/tsc --version
```

---

<SlideHeader slideTitle="Transpilation : mise en pratique" />

#### üìêü§ì Installer TypeScript

- Ajoutez **TypeScript** √† votre projet avec Yarn
- Cr√©ez un fichier <mark>index.ts</mark> contenant :

```ts
const getUserBio = (name: string, city: string, age: number) =>
  `${name} vit √† ${city} et a ${age} ans. Dans 42 ans il aura ${age + 42}.`;
```

- Ex√©cutez `./node_modules/.bin/tsc index.ts`

<Box mt={6}>
  <small>
    üí° <mark>.ts</mark> est l'extension des fichiers TypeScript
  </small>
</Box>

---

<SlideHeader slideTitle="Transpilation" />

#### üí° Utiliser **les scripts** du package.json

- On peut utiliser le champ **scripts** du fichier **package.json**
- Yarn/NPM va alors automatiquement utiliser le binaire local (situ√© dans **./node_modules/.bin/**)

```json
{
  "scripts": {
    "build": "tsc"
  },
  "devDependencies": {
    "typescript": "^4.6.3"
  }
}
```

---

<SlideHeader slideTitle="Transpilation" />

#### Personnaliser la transpilation

TypeScript transpile avec une configuration par d√©faut, **pour la modifier, 2 m√©thodes sont possibles :**

- Passer des options / flags √† la commande `tsc`
- Configurer les option via un fichier de config

---

<SlideHeader slideTitle="Transpilation" />

#### Via les options

```bash
yarn build index.ts --outDir build --target ES5
```

---

<SlideHeader slideTitle="Transpilation" />

#### Via un fichier de config

- On peut personnaliser cette √©tape avec un fichier <mark>tsconfig.json</mark>
- Plus pratique
- L'option `tsc --init` permet de g√©n√©rer ce fichier

üìö Doc https://www.typescriptlang.org/tsconfig

---

<SlideHeader slideTitle="Transpilation : mise en pratique" />

#### üìêü§ì G√©n√©rer le fichier tsconfig

- Ex√©cutez `yarn build --init`
- Ouvrez le fichier `tsconfig.json`

---

<SlideHeader slideTitle="Transpilation" />

#### Comprendre le fichier tsconfig

Par d√©faut, le fichier expose uniquement les options de compilation `compilerOptions` :

```json
{
  "compilerOptions": {
    "target": "es2016",
    "outDir": "dist",
    "strict": true
    // ...
  }
}
```

---

<SlideHeader slideTitle="Transpilation" />

#### Comprendre le fichier tsconfig

Les attributs racines disponibles :

```json
{
  // options de compilation
  "compilerOptions": {},
  // liste exhaustive des fichiers √† compiler
  "files": ["main.ts", "core.ts"],
  // fichiers/dossier √† inclure
  "include": ["src/**/*", "tests/**/*"],
  // fichiers/dossiers √† exclure
  "exclude": ["node_module"],
  // pour h√©riter d'un autre fichier de config
  "extends": "../configs/base",
  // permet de faire des sous modules
  "references": {}
}
```

---

<SlideHeader slideTitle="Typage statique" />

#### TypeScript en deux concepts :

- Transpilation
- <mark>Typage statique</mark>

---

<SlideHeader slideTitle="Typage statique" />

#### Le typage statique

- JavaScript est un langage √† **typage dynamique** (types d√©termin√©s lors de <mark>l'ex√©cution</mark>)
- TypeScript est un langage √† **typage statique** (types d√©termin√©s lors de la <mark>compilation</mark>)

---

<SlideHeader slideTitle="Typage statique" />

#### Typage statique : avantages

<List fontSize="1em" textAlign="left" m="0.6em 0" padding="12px 0">
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Permet de lever les erreurs en amont
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    R√©duire les bugs
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    Am√©liore la DX (exp√©rience d√©veloppeur)
  </ListItem>
  <ListItem>
    <ListIcon as={MdCheckCircle} color="green.300" />
    G√©n√©ration de docs
  </ListItem>
</List>

---

<SlideHeader slideTitle="Typage statique" />

#### üí° Typage nominatif vs structurel

- **Typage nominatif** : porte sur **le nom** des types / interfaces (ex : PHP)
- **Typage structurel** : porte sur **la structure** m√™me (ex : TS)

</Slides>
